/*! iptools-jquery-populator - v0.1.0 - 2015-08-19
* https://github.com/interactive-pioneers/iptools-jquery-populator
* Copyright Â© 2015 Interactive Pioneers GmbH; Licensed GPL-3.0 */
!function(a){"use strict";function b(b,d){function e(b){return a(b).attr("data-"+r.populationTarget)}function f(b){return a(b).attr("data-"+r.manualPopulationTarget)}function g(){return s.element.find("*[data-"+r.manualPopulationTarget+"]")}function h(){return s.element.find("*[data-"+r.populationTarget+"]")}function i(b){switch(m(b)){case"input_text":case"input_password":case"input_phone":case"input_email":a(b).bind(j("blur"),k);break;default:a(b).bind(j("change"),k)}}function j(a){return a+"."+c}function k(a){s.populate(a.currentTarget)}function l(){h().each(function(){a(this).unbind(j("blur")).unbind(j("change"))})}function m(b){var c=a(b).tagName().toLowerCase(),d=c;return"input"===c&&(d+="_"+a(b).attr("type")),d}function n(b,c){var d=!1;return a(b).children("option").each(function(){return a(this).val()===c.toString()?(d=!0,!0):void 0}),d}function o(b,c){var d=a(c);if(0===d.length)throw new TypeError("Invalid population target. Target not found.");var e=m(d);if(d.length>0){switch(m(b)){case"input_radio":case"input_checkbox":switch(e){case"input_hidden":a(b).is(":checked")?d.val(1).attr("disabled",!1):d.attr("disabled",!0).removeAttr("value");break;case"input_radio":case"input_checkbox":a(b).prop?d.prop("checked",a(b).prop("checked")):d.attr("checked",a(b).attr("checked"));break;default:d.val(a(b).val())}break;case"select":var f=a(b).val();if(!n(d,f)){var g=d.attr("data-"+r.defaultValueError);return g&&n(d,g)&&d.val(g),s.element.trigger("error",{type:"populationMismatch",target:d,source:a(b)}),!1}d.val(f);break;default:d.val(a(b).val())}d.trigger("change",a(b)),s.element.trigger("success",{type:"populationSuccess",target:d,source:a(b)})}}function p(){h().each(function(){i(this)})}var q={},r={populationTarget:"population-target",manualPopulationTarget:"population-target-manual",defaultValueError:"population-error-default-value"};this.element=a(b),this.settings=a.extend({},q,d);var s=this;this.destroy=function(){l(),this.element.removeData("plugin_"+c)},this.populate=function(a){var b=e(a);o(a,b)},this.populateManual=function(){g().each(function(){o(this,f(this))})},p()}var c="iptPopulator";a.fn.tagName=function(){return this.prop?this.prop("tagName"):this.attr("tagName")},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery);